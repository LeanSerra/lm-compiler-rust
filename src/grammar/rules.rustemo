Program: TokenId TokenParOpen TokenParClose TokenCBOpen Body TokenCBClose {ProgramWithMain}
 | Body {ProgramOnlyBody};

Body: TokenInit InitBody Expressions {BodyInitExpressions}
 | TokenInit InitBody {BodyInit}
 | Expressions {BodyExpressions}
 | EMPTY {BodyEmpty};

InitBody: TokenCBOpen VarDeclarations TokenCBClose {InitBody};

FunctionRead: TokenRead TokenParOpen TokenId TokenParClose {FunctionReadCall};

FunctionWrite: TokenWrite TokenParOpen SimpleExpression TokenParClose {FunctionWriteCall};

FunctionIsZero: TokenIsZero TokenParOpen ArithmeticExpression TokenParClose {FunctionIsZeroCall};

FunctionConvDate: TokenConvDate TokenParOpen TokenDate TokenParClose {FunctionConvDateVariableCall};

VarDeclarations: VarDeclaration {VarDeclarationsSingle}
 | VarDeclaration VarDeclarations {VarDeclarationsRecursive};

VarDeclaration: TokenId TokenColon DataType {VarDeclarationSingle}
 | TokenId TokenComma VarDeclaration {VarDeclarationRecursive};

Expressions: Statement {ExpressionSingle}
 | Statement Expressions {ExpressionRecursive};

Statement: Assignment {StatementAssignment}
 | IfStatement {StatementIfStatement}
 | ElseStatement {StatementElseStatement}
 | WhileLoop {StatementWhile}
 | FunctionWrite {StatementWrite}
 | FunctionRead {StatementRead};

Assignment: TokenId TokenAssign SimpleExpression {AssignmentExpression}
 | TokenId TokenAssign FunctionConvDate {AssignmentConvDate};

DataType: TokenInt {IntType}
 | TokenFloat {FloatType}
 | TokenString {StringType};

WhileLoop: TokenWhile TokenParOpen BooleanExpression TokenParClose TokenCBOpen Body TokenCBClose {While};

IfStatement: TokenIf TokenParOpen BooleanExpression TokenParClose TokenCBOpen Body TokenCBClose {IfStatement};

ElseStatement: TokenElse TokenCBOpen Body TokenCBClose {ElseStatement};

BooleanExpression: SimpleExpression BooleanExpressionChain {BooleanExpressionSimpleExpression}
 | TokenTrue {BooleanExpressionTrue}
 | TokenFalse {BooleanExpressionFalse}
 | SimpleExpression BooleanExpressionChain Conjunction BooleanExpression {BooleanExpressionSimpleExpressionRecursive}
 | NotStatement {BooleanExpressionNotStatement}
 | FunctionIsZero {BooleanExpressionIsZero};

BooleanExpressionChain: ComparisonOp SimpleExpression BooleanExpressionChain {BooleanExpressionChainAux}
 | EMPTY {BooleanExpressionChainEmpty};

SimpleExpression: ArithmeticExpression {SimpleExpressionArithmetic}
 | TokenStringLiteral {SimpleExpressionString};

Conjunction: TokenAnd {ConjunctionAnd}
 | TokenOr {ConjunctionOr};

ComparisonOp: TokenEqual {ComparisonOpEqual}
 | TokenNotEqual {ComparisonOpNotEqual}
 | TokenLess {ComparisonOpLess}
 | TokenLessEqual {ComparisonOpLessEqual}
 | TokenGreater {ComparisonOpGreater}
 | TokenGreaterEqual {ComparisonOpGreaterEqual};

Number: TokenIntLiteral {NumberInt}
 | TokenFloatLiteral {NumberFloat}
 | TokenSub TokenIntLiteral {NumberNegativeInt}
 | TokenSub TokenFloatLiteral {NumberNegativeFloat};

NotStatement: TokenNot BooleanExpression {Not};

ArithmeticExpression: ArithmeticExpression DummyAE TokenSum Term {ArithmeticExpressionSumTerm}
| ArithmeticExpression DummyAE TokenSub Term {ArithmeticExpressionSubTerm}
| Term {ArithmeticExpressionTerm};

DummyAE: EMPTY;

Term: Term DummyT TokenMul Factor {TermMulFactor}
| Term DummyT TokenDiv Factor {TermDivFactor}
| Factor {TermFactor};

DummyT: EMPTY;

Factor: TokenId {FactorId}
| Number {FactorNumber}
| TokenParOpen ArithmeticExpression TokenParClose {FactorParen};

terminals

TokenInt:;
TokenFloat:;
TokenString:;
TokenIntLiteral:;
TokenFloatLiteral:;
TokenStringLiteral:;
TokenId:;
TokenAssign:;
TokenSum:;
TokenMul:;
TokenSub:;
TokenDiv:;
TokenParOpen:;
TokenParClose:;
TokenCBOpen:;
TokenCBClose:;
TokenColon:;
TokenInit:;
TokenWhile:;
TokenEqual:;
TokenNotEqual:;
TokenLess:;
TokenLessEqual:;
TokenGreater:;
TokenGreaterEqual:;
TokenTrue:;
TokenFalse:;
TokenIf:;
TokenElse:;
TokenComma:;
TokenAnd:;
TokenOr:;
TokenNot:;
TokenRead:;
TokenWrite:;
TokenIsZero:;
TokenConvDate:;
TokenDate:;
